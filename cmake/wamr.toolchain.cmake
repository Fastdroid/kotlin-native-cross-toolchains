cmake_minimum_required(VERSION 3.6.0)

if (__WAMR_TOOLCHAIN_INCLUDED)
  return()
endif()
set(__WAMR_TOOLCHAIN_INCLUDED true)

get_filename_component(WAMR_TOOLCHAIN_DIR "${CMAKE_CURRENT_LIST_DIR}/.." ABSOLUTE)
list(APPEND CMAKE_MODULE_PATH "${WAMR_TOOLCHAIN_DIR}/cmake")
set(CMAKE_SYSTEM_NAME WASI)
set(CROSS_PREFIX wasm32-wamr-wasi)
set(TOOLCHAIN_BIN_DIR "${WAMR_TOOLCHAIN_DIR}/bin")
if(CMAKE_HOST_SYSTEM_NAME STREQUAL Windows)
  set(TOOLCHAIN_SUFFIX .exe)
else()
  unset(TOOLCHAIN_SUFFIX)
endif()
set(CMAKE_C_COMPILER "${TOOLCHAIN_BIN_DIR}/${CROSS_PREFIX}-clang${TOOLCHAIN_SUFFIX}")
set(CMAKE_CXX_COMPILER "${TOOLCHAIN_BIN_DIR}/${CROSS_PREFIX}-clang++${TOOLCHAIN_SUFFIX}")
set(CMAKE_AR "${TOOLCHAIN_BIN_DIR}/${CROSS_PREFIX}-ar${TOOLCHAIN_SUFFIX}")
set(CMAKE_RANLIB "${TOOLCHAIN_BIN_DIR}/${CROSS_PREFIX}-ranlib${TOOLCHAIN_SUFFIX}")
